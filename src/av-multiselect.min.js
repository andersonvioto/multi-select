!function(){"use strict";function a(){return{require:"ngModel",restrict:"E",templateUrl:"/distribuicao/js/diretivas/combo-filter/combo-filter.html",scope:{cfLabel:"@",cfList:"=",cfDisplay:"@",cfValue:"@"},link:function(a,b,c,d){function e(c){var d=b.find(c.target).length>0;d||a.$apply(function(){a.cfOpened=!1})}a.cfOptLink={},a.cfOpened=!1,a.cfShowClear=!1,a.cfCleanFilter=function(b){b.stopPropagation(),a.cfList.forEach(function(b){a.cfOptLink[b[a.cfValue]]=!0})},a.cfOpenOptions=function(){if(a.cfOpened)a.cfOpened=!1;else{var c=angular.element(angular.element(angular.element(b).children()[1]).children()[0]),d=angular.element(angular.element(angular.element(b).children()[1]).children()[1]);if(angular.element(b).offset().top-window.scrollY>450){var e=c.height(),f=d.height(),g="-"+(e+f+4)+"px";d.css("margin-top",g)}else d.css("margin-top","auto");a.cfOpened=!0}},a.$watchCollection("cfList",function(b){b.forEach(function(b){var c=!1;d.$modelValue&&d.$modelValue.forEach(function(d){d==b[a.cfValue]&&(c=!0)}),a.cfOptLink[b[a.cfValue]]=c})}),a.$watchCollection("cfOptLink",function(b){var c=[],e=!1;for(var f in b)b[f]?isNaN(f)?c.push(f):c.push(Number(f)):e=!0;a.cfShowClear=e,d.$setViewValue(c),d.$render()}),a.$watch(function(){return d.$modelValue},function(b){a.cfList.forEach(function(c){var d=!1;b.forEach(function(b){b==c[a.cfValue]&&(d=!0)}),a.cfOptLink[c[a.cfValue]]=d})}),document.body.addEventListener("click",e,!1),a.$on("$destroy",function(){document.body.removeEventListener("click",e,!1)})}}}angular.module("combo-filter",[]).directive("comboFilter",[a])}();