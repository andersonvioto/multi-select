!function(){"use strict";function a(){return{require:"ngModel",restrict:"E",template:'<div><div class="mcCombo" ng-class="{\'mcOpened\':mcOpened}"><span class="mcLabel" ng-click="mcOpenOptions()"><span class="mcClear"><b ng-if="mcShowClear" title="clean" ng-click="mcCleanFilter($event)">X</b></span>  {{mcLabel}} <b class="mcNuIcon">&nu;</b></span></div><div class="mcOptions"  ng-class="{\'mcOpened\':mcOpened}" ><ul><li ng-repeat="i in mcData | orderBy:mcDisplay"><label><input type="checkbox" ng-model="mcOptLink[i[mcValue]]"> {{i[mcDisplay]}}</label></li></ul></div></div>',scope:{mcLabel:"@",mcData:"=",mcDisplay:"@?",mcValue:"@?"},link:function(a,b,c,d){function e(b){f(b.target)||a.$apply(function(){a.mcOpened=!1})}function f(a){for(var c=a.parentNode;null!=c;){if(c==b[0])return!0;c=c.parentNode}return!1}a.mcDisplay||(a.mcDisplay="display"),a.mcValue||(a.mcValue="value"),a.mcOptLink={},a.mcOpened=!1,a.mcShowClear=!1,a.mcCleanFilter=function(b){b.stopPropagation(),a.mcData.forEach(function(b){a.mcOptLink[b[a.mcValue]]=!0})},a.mcOpenOptions=function(){a.mcOpened=!a.mcOpened},a.$watchCollection("mcData",function(b){b.forEach(function(b){var c=!1;d.$modelValue&&d.$modelValue.forEach(function(d){d==b[a.mcValue]&&(c=!0)}),a.mcOptLink[b[a.mcValue]]=c})}),a.$watchCollection("mcOptLink",function(b){var c=[],e=!1;for(var f in b)b[f]?isNaN(f)?c.push(f):c.push(Number(f)):e=!0;a.mcShowClear=e,d.$setViewValue(c),d.$render()}),a.$watch(function(){return d.$modelValue},function(b){a.mcData.forEach(function(c){var d=!1;b.forEach(function(b){b==c[a.mcValue]&&(d=!0)}),a.mcOptLink[c[a.mcValue]]=d})}),document.body.addEventListener("click",e,!1),a.$on("$destroy",function(){document.body.removeEventListener("click",e,!1)})}}}angular.module("mcCombo",[]).directive("mcCombo",[a])}();
